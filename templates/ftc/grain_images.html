{% extends "ftc/base.html" %}

{% load static %}
{% load order_by %}

{% block content %}
<h2>
    Images for <a href="{% url 'grain' object.pk %}">grain {{ object.index }}</a>
    of sample <a href="{% url 'sample' object.sample.pk %}">{{ object.sample.sample_name }}</a>
    in project <a href="{% url 'project' object.sample.in_project.pk %}">{{ object.sample.in_project.project_name }}</a>
</h2>
<table class="table">
    <thead>
        <tr>
            <th>format</th>
            <th>ft_type</th>
            <th>index</th>
            <th>light_path</th>
            <th>focus</th>
            <th>image link</th>
        </tr>
    </thead>
    <tbody>
        {% for image in object.image_set.all|order_by:"index" %}
        <tr>
            <td>{{ image.format }}</td>
            <td>{{ image.ft_type }}</td>
            <td>{{ image.index }}</td>
            <td>{{ image.light_path }}</td>
            <td>{{ image.focus }}</td>
            <td><a href="{% url 'image_delete' image.pk %}">Image {{ image.pk }}</a></td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<p>Add more images or image metadata:</p>
<form
    enctype="multipart/form-data"
    action="{% url 'grain_images' object.pk %}"
    method="POST">
    {% csrf_token %}
    {{ form }}
    <input type="submit" value="Add files">
</form>
{% endblock %}
